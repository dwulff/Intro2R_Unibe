<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Financial_Data_Case_Study.utf8</title>

<script src="Financial_Data_Case_Study_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="Financial_Data_Case_Study_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="Financial_Data_Case_Study_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="Financial_Data_Case_Study_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="Financial_Data_Case_Study_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="Financial_Data_Case_Study_files/navigation-1.1/tabsets.js"></script>
<link href="Financial_Data_Case_Study_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="Financial_Data_Case_Study_files/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="practical.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="fluid-row" id="header">




</div>


<p align="center">
<img width="100%" src="image/finance.png" margin=0><br> <font style="font-size:10px">adapted from <a href="https://static.memrise.com/uploads/course_photos/3146044000150629230223.jpg">static.memrise.com</a></font>
</p>
<div id="section" class="section level1 tabset">
<h1></h1>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>In this case study, you will analyse historic data of three major stock indices, the <strong>Dow Jones</strong>, the <strong>DAX</strong>, and the <strong>Nikkei</strong>, and the exchange rates between the <strong>US dollar</strong>, the <strong>Euro</strong>, and the <strong>Yen</strong>. Using this data, you will address several questions.</p>
<ol style="list-style-type: decimal">
<li>How large was the impact of the recent financial crisis on the respective stock markets?</li>
<li>How correlated is the development between the stock markets?</li>
<li>What is the relationship between stock market returns and exchange rates?</li>
</ol>
<p>To address these questions, you will import several data files, using various function parameters to match the idiosyncrasies of the data. You will merge the data files into a single data frame, and mutate the data to reflect changes in index price and exchange rate. You will analyze correlations of stock indices among themselves and to exchange rates and create illustrative plots for each of the analyses.</p>
<p>Below you will find several tasks that will guide you through these steps. For the most part these tasks require you to make use of what you have learned in the sessions <strong>Data</strong>, <strong>Wrangling</strong>, <strong>Analysing</strong>, and <strong>Plotting</strong>.</p>
</div>
<div id="tasks" class="section level2">
<h2>Tasks</h2>
<div id="a---getting-setup" class="section level3">
<h3>A - Getting Setup</h3>
<ol style="list-style-type: decimal">
<li><p>Open your <code>bernrbootcamp</code> R project. It should already have the folders <code>1_Data</code> and <code>2_Code</code>.</p></li>
<li><p>We want to generate an R Markdown document for this case study. In RStudio, click File – New File – R Markdown – Document – Html. Save your markdown file <em>in your main project directory</em> under the name <code>financial_casestudy.Rmd</code>.</p></li>
<li><p>At the top of the script load the <code>tidyverse</code> package.</p></li>
<li><p>From time to time - don’t forget to <code>Knit</code> your code with the Knit-Button.</p></li>
</ol>
<p><img src="https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/rmarkdown_ss_D.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="b---data" class="section level3">
<h3>B - Data</h3>
<ol style="list-style-type: decimal">
<li><p>In this practical, you will load three external data sets <code>\^DJI.csv</code>, <code>\^GDAXI.csv</code>, and <code>\^N225.csv</code>. However, two of these data files are not yet tidy. Specifically, <code>\^GDAXI.csv</code> and <code>\^N225.csv</code> include a specific character string to represent missings in the data and is not identify by R as such. To identify the <code>NA</code>-character string in the data open one of them in a text viewer, (via RStudio or via, e.g., <em>textedit</em>). Do you see the string value that indicates missing data?</p></li>
<li><p>Once you have identified the character string for missing data, us the <code>read_csv()</code> function to load in the stock index data sets, “^DJI.csv”, “^GDAXI.csv”, and “^N225.csv”, from your <code>1_Data</code> folder. In so doing, set an explicit <code>na</code>-argument to account for the fact that “^GDAXI.csv” “^N225.csv” use a specific character string to represent missings in the data.</p></li>
</ol>
<pre class="r"><code># Load index data from local data folder 
dow &lt;- read_csv(file = &#39;1_Data/^DJI.csv&#39;)
dax &lt;- read_csv(file = &#39;1_Data/^GDAXI.csv&#39;, na = &#39;XXX&#39;)  # &#39;XXX&#39; means missing!
nik &lt;- read_csv(file = &#39;1_Data/^N225.csv&#39;, na = &#39;XXX&#39;)   # &#39;XXX&#39; means missing!</code></pre>
<pre><code>Parsed with column specification:
cols(
  Date = col_date(format = &quot;&quot;),
  Open = col_double(),
  High = col_double(),
  Low = col_double(),
  Close = col_double(),
  `Adj Close` = col_double(),
  Volume = col_double()
)
Parsed with column specification:
cols(
  Date = col_date(format = &quot;&quot;),
  Open = col_double(),
  High = col_double(),
  Low = col_double(),
  Close = col_double(),
  `Adj Close` = col_double(),
  Volume = col_double()
)
Parsed with column specification:
cols(
  Date = col_date(format = &quot;&quot;),
  Open = col_double(),
  High = col_double(),
  Low = col_double(),
  Close = col_double(),
  `Adj Close` = col_double(),
  Volume = col_double()
)</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Load in the exchange rate data sets, <code>euro-dollar.txt</code> and <code>yen-dollar.txt</code>, from the <code>1_Data</code> folder as two new objects called <code>eur_usd</code> and <code>yen_usd</code>. To do this, use the <code>read_delim()</code>-function and <code>\t</code> as the <code>delim</code>-argument, telling R that the data is tab-delimited.</li>
</ol>
<pre><code>Parsed with column specification:
cols(
  `04 Jan 1999` = col_character(),
  `1.186669` = col_double()
)</code></pre>
<pre><code>Parsed with column specification:
cols(
  `02 Jan 1990` = col_character(),
  `0.006838` = col_double()
)</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Print the <code>eur_usd</code> and <code>yen_usd</code> objects. Are all the data types and variable names correct? Not quite, right?</li>
</ol>
<pre><code># A tibble: 6,545 x 2
   `04 Jan 1999` `1.186669`
   &lt;chr&gt;              &lt;dbl&gt;
 1 05 Jan 1999         1.18
 2 06 Jan 1999         1.16
 3 07 Jan 1999         1.17
 4 08 Jan 1999         1.16
 5 11 Jan 1999         1.15
 6 12 Jan 1999         1.16
 7 13 Jan 1999         1.17
 8 14 Jan 1999         1.17
 9 15 Jan 1999         1.16
10 18 Jan 1999         1.16
# … with 6,535 more rows</code></pre>
<pre><code># A tibble: 8,764 x 2
   `02 Jan 1990` `0.006838`
   &lt;chr&gt;              &lt;dbl&gt;
 1 03 Jan 1990      0.00686
 2 04 Jan 1990      0.00698
 3 05 Jan 1990      0.00695
 4 08 Jan 1990      0.00694
 5 09 Jan 1990      0.00689
 6 10 Jan 1990      0.00688
 7 11 Jan 1990      0.00688
 8 12 Jan 1990      0.00688
 9 16 Jan 1990      0.00687
10 17 Jan 1990      0.00687
# … with 8,754 more rows</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>To fix the data, first load the data again and use the <code>col_names</code>-argument to explicitly assign the column names to be <code>Date</code> and <code>Rate</code>. This will prevent R to take names from the first row of the data.</li>
</ol>
<pre><code>Parsed with column specification:
cols(
  Date = col_character(),
  Rate = col_double()
)
Parsed with column specification:
cols(
  Date = col_character(),
  Rate = col_double()
)</code></pre>
<ol start="6" style="list-style-type: decimal">
<li><p>Now, change the variable <code>Date</code> to type <code>date</code>. Fix this using the <code>parse_date()</code> function with <code>format = '%d %b %Y'</code>. This specifies the exact format the dates are formatted in. Overwrite the existing <code>Date</code>-variable.</p></li>
<li><p>Now you should have tidier data! Go ahead an explore the data a bit. What data do they contain? Consider using <code>summary</code> or <code>skimr::skim()</code>.</p></li>
</ol>
</div>
<div id="c---wrangling" class="section level3">
<h3>C - Wrangling</h3>
<ol style="list-style-type: decimal">
<li>Before we can begin the analysis of the data, we to join the individual data frames into a single data frame called <code>financial_data</code> that contains only the dates variable (<code>Date</code>), the stock index (unadjusted) closing prices (<code>Close</code>), as well as the exchange rates. Begin by joining <code>dow</code> and <code>dax</code> using <code>inner_join()</code>, selecting only the <code>Date</code> and <code>Close</code> variables of each data frame. See code below.</li>
</ol>
<pre><code># A tibble: 7,577 x 3
   Date       Close.x Close.y
   &lt;date&gt;       &lt;dbl&gt;   &lt;dbl&gt;
 1 1987-12-30   1950.   1005.
 2 1987-12-31   1939.     NA 
 3 1988-01-04   2015.    956.
 4 1988-01-05   2032.    996.
 5 1988-01-06   2038.   1006.
 6 1988-01-07   2052.   1014.
 7 1988-01-08   1911.   1027.
 8 1988-01-11   1945.    988.
 9 1988-01-12   1929.    987.
10 1988-01-13   1925.    966.
# … with 7,567 more rows</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Inspect the data! What has R done with the names of the two <code>Close</code> variables? Run the code again, this time using the <code>suffix</code>-argument to give both variables suffixes preserve the origin of these variables, e.g., <code>suffix = c(_dow','_dax')</code>.</li>
</ol>
<pre><code># A tibble: 7,577 x 3
   Date       Close_dow Close_dax
   &lt;date&gt;         &lt;dbl&gt;     &lt;dbl&gt;
 1 1987-12-30     1950.     1005.
 2 1987-12-31     1939.       NA 
 3 1988-01-04     2015.      956.
 4 1988-01-05     2032.      996.
 5 1988-01-06     2038.     1006.
 6 1988-01-07     2052.     1014.
 7 1988-01-08     1911.     1027.
 8 1988-01-11     1945.      988.
 9 1988-01-12     1929.      987.
10 1988-01-13     1925.      966.
# … with 7,567 more rows</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><p>Looks better now? OK, now that you know how to join two data sets repeat the steps until all five data sets are included in <code>financial</code>. Remember, we only want the dates variable (<code>Date</code>), the stock index (unadjusted) closing prices (<code>Close</code>). Note if you have trouble fixing all variables names using the <code>suffix</code>-argument you can also take of this at the end using <code>rename()</code>.</p></li>
<li><p>Alright, now let’s create <code>change</code> variables that show how the exchange rates and stock indices have moved. Use the <code>mutate</code>- and the <code>diff()</code>-function. The <code>diff</code> computes the differences between every adjacent pair of entries in a vector. As this results in one fewer differences than there values in the vector add an <code>NA</code> at the first position of the change variable à la <code>c(NA, diff(my_variable))</code>.</p></li>
<li><p>We will be mainly interested in how stock prices and exchange rates change over the course of a year. To create a variable that codes the year <code>mutate()</code> and <code>lubridate::year(Date)</code>, which will extract from <code>Date</code> the year information.</p></li>
</ol>
<pre class="r"><code># load lubridate
library(lubridate)</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Finally, we want the data in the “long”, instead of the current “wide” format. Call this dataset <code>financial_long</code>. In long formats variables occupy different rows rather than columns. We want to end with 4 columns: Date, year, variable and value.</li>
</ol>
<pre class="r"><code># create long version of data frame
financial_long &lt;- 
financial %&gt;%
pivot_longer(names_to = &#39;variable&#39;,
             values_to = &#39;value&#39;,
             cols = c(-XXX, 
                      -XXX))</code></pre>
<pre class="r"><code># create long version of data frame
financial_long &lt;- 
financial %&gt;%
pivot_longer(names_to = &#39;variable&#39;,
             values_to = &#39;value&#39;,
             cols = c(-Date, -year))</code></pre>
<ol start="7" style="list-style-type: decimal">
<li>Now your data is tidy proper (at least with regard to the analyses required here)! Go ahead an explore the data a bit. What data do they contain? Consider using <code>summary</code> or <code>skimr::skim()</code>.</li>
</ol>
</div>
<div id="d---analysing-and-plotting" class="section level3">
<h3>D - Analysing and Plotting</h3>
<ol style="list-style-type: decimal">
<li>Plot the development of each of the stock indices over the available time periods. First, select rows corresponding to the stock index prices. Then use the <code>ggplot()</code>-function to start a plot. Then, Map <code>Date</code> to <code>x</code> and <code>value</code> to <code>y</code> in the <code>aes()</code>-function. And, finally, add a <code>geom_line()</code>. Does the plot look right?</li>
</ol>
<pre class="r"><code># create long version of data frame
financial_long %&gt;% 
  filter(variable %in% c(&quot;Close_dow&quot;, &quot;Close_dax&quot;, &quot;Close_nik&quot;)) %&gt;%
ggplot(mapping = aes(x = Date, y = value)) + 
  geom_line()</code></pre>
<p><img src="Financial_Data_Case_Study_files/figure-html/unnamed-chunk-16-1.png" width="576" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Looked like the values of the three stock indices were somehow overlayering each other. Use <code>+ facet_grid(~variable)</code> to teas them apart. Also give it a slightly nicer appearance using <code>+ theme_light()</code> What does the plot tell you? Has there been a particular drop in any year?</li>
</ol>
<pre class="r"><code># create long version of data frame
financial_long %&gt;% 
  filter(variable %in% c(&quot;Close_dow&quot;, &quot;Close_dax&quot;, &quot;Close_nik&quot;)) %&gt;%
ggplot(mapping = aes(x = Date, y = value)) + 
  geom_line() + 
  facet_grid(~variable) + 
  theme_light()</code></pre>
<p><img src="Financial_Data_Case_Study_files/figure-html/unnamed-chunk-17-1.png" width="576" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Calculate the overall stock index price change per year. To do this, use <code>group_by()</code> and <code>summarise()</code> on the stock index change variables. Use the basic <code>sum()</code>-function inside <code>summarise()</code> to compute the overall change in the year. In doing this, don’t forget there were <code>NA</code>’s in two of the stock index price variables. Check out the result! When was the biggest drop in stock index prices?</li>
</ol>
<pre class="r"><code># calculate aggregate change per year
aggregate_change &lt;- financial %&gt;% 
  group_by(year) %&gt;% 
  summarize(
    mean_dow_change = sum(Close_dow_change),
    mean_dax_change = sum(Close_dax_change, na.rm = TRUE),
    mean_nik_change = sum(Close_nik_change, na.rm = TRUE)
)
aggregate_change</code></pre>
<pre><code># A tibble: 20 x 4
    year mean_dow_change mean_dax_change mean_nik_change
   &lt;dbl&gt;           &lt;dbl&gt;           &lt;dbl&gt;           &lt;dbl&gt;
 1  1999            NA             1529.          5903. 
 2  2000          -709.            -455.         -5561. 
 3  2001          -766.           -1254.         -4436. 
 4  2002         -1680.           -2112.         -2235. 
 5  2003          2112.             718.           327. 
 6  2004           329.             180.          1335. 
 7  2005           -65.5           1108.          3219. 
 8  2006          1746.            1189.          1504. 
 9  2007           903.            1470.         -1918. 
10  2008         -4697.           -3257.         -6448. 
11  2009          1880.            1147.          1513. 
12  2010          1021.             957.          -318. 
13  2011           648.           -1016.         -1774. 
14  2012           721.            1714.          1940. 
15  2013          3566.            1940.          5896. 
16  2014          1479.             253.          1159. 
17  2015          -379.             937.          1583. 
18  2016          2159.             738.            80.7
19  2017          4957.            1266.          3439. 
20  2018          -455.            -960.         -2395. </code></pre>
<ol start="4" style="list-style-type: decimal">
<li>The results up to now suggest that modern financial markets are closely intertwined, to the extent that a change in one market can bring about a change in the markets. Evaluate this aspect of financial markets by calculating all correlations between the three stock index change variables using the <code>cor()</code>-function. <code>cor()</code> can take a data frame as an argument to produce the full correlation matrix among all variables in the data frame. This requires, however, that the data is stored in a “wide” format. Reactivate the old, wide <code>financial</code> data set and use it inside <code>cor()</code>. Before that select the variables you are interest in. Again, don’t forget about the <code>NA</code>s - there is an argument for <code>cor()</code> to deal with them. How closely are the stock indices related and which ones are most closely related?</li>
</ol>
<pre class="r"><code>financial %&gt;% 
  select(Close_dow_change, Close_dax_change, Close_nik_change) %&gt;%
  cor(., use = &#39;complete.obs&#39;)</code></pre>
<pre><code>                 Close_dow_change Close_dax_change Close_nik_change
Close_dow_change            1.000            0.570            0.169
Close_dax_change            0.570            1.000            0.318
Close_nik_change            0.169            0.318            1.000</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Evaluate the stability of the relationships between financial markets by calculating pair-wise correlations for each year using <code>group_by</code> and <code>summarise()</code>. Note that here you have to specify each pairwise correlation separately inside <code>summarise()</code>.</li>
</ol>
<pre class="r"><code>financial %&gt;% 
  group_by(year) %&gt;% 
  summarize(
    cor_dow_dax = cor(Close_dow_change, Close_dax_change, use = &#39;complete.obs&#39;),
    cor_dow_nik = cor(Close_dow_change, Close_nik_change, use = &#39;complete.obs&#39;),
    cor_dax_nik = cor(Close_dax_change, Close_nik_change, use = &#39;complete.obs&#39;)
)</code></pre>
<pre><code># A tibble: 20 x 4
    year cor_dow_dax cor_dow_nik cor_dax_nik
   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
 1  1999       0.453      0.0730       0.192
 2  2000       0.308     -0.0519       0.195
 3  2001       0.667      0.255        0.287
 4  2002       0.654      0.196        0.236
 5  2003       0.695      0.127        0.249
 6  2004       0.468      0.166        0.344
 7  2005       0.390      0.0625       0.327
 8  2006       0.594      0.100        0.266
 9  2007       0.537      0.0874       0.394
10  2008       0.613      0.212        0.527
11  2009       0.732      0.175        0.260
12  2010       0.695      0.255        0.329
13  2011       0.796      0.185        0.351
14  2012       0.725      0.212        0.325
15  2013       0.566      0.161        0.256
16  2014       0.567      0.149        0.176
17  2015       0.538      0.254        0.295
18  2016       0.605      0.214        0.387
19  2017       0.554      0.367        0.395
20  2018       0.378      0.108        0.481</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Another important aspect of financial markets are exchange rates between currencies. Generally, it is assumed that a strong economy translates into both a strong stock index and a strong currency relative to other currencies. For the end of this practical, let’s find out if that holds true our data. First, evaluate whether changes in exchange rates changes correlate with each other in the same way that stock indices did using the <code>cor</code>-function.</li>
</ol>
<pre class="r"><code>financial %&gt;% 
  select(Rate_eur_change, Rate_yen_change) %&gt;%
  cor(., use = &#39;complete.obs&#39;)</code></pre>
<pre><code>                Rate_eur_change Rate_yen_change
Rate_eur_change           1.000           0.391
Rate_yen_change           0.391           1.000</code></pre>
<ol start="7" style="list-style-type: decimal">
<li>Now, evaluate whether exchange rates vary as a function of the <em>difference</em> between stock indices. That is, for instance, does a large difference between Dow Jones and DAX translate into a strong Dollar relative to the EURO? According to the above intuition this should be the case. However, there is an alternative economic hypothesis. That is, foreign investors who benefit from a rise in stock index price may be motivated to sell their holdings and exchange them for their own currency to maintain a neutral position. This would, in effect, depreciate the currency at the same time as the stock index is outperforming, thus producing a negative relationship. What do you think? Ask the data.</li>
</ol>
<pre class="r"><code>financial %&gt;% 
  summarize(
    cor_dow_dax = cor(Close_dow - Close_dax, Rate_eur, use = &#39;complete.obs&#39;),
    cor_dow_nik = cor(Close_dow - Close_nik, Rate_yen, use = &#39;complete.obs&#39;)
  )</code></pre>
<pre><code># A tibble: 1 x 2
  cor_dow_dax cor_dow_nik
        &lt;dbl&gt;       &lt;dbl&gt;
1      0.0869       0.569</code></pre>
<ol start="8" style="list-style-type: decimal">
<li>Finally, evaluate the stability of the above relationship for each year separately. Can you make out a stable pattern? No? I guess it depends. As always.</li>
</ol>
<pre class="r"><code>financial %&gt;% 
  group_by(year) %&gt;% 
  summarize(
    cor_dow_dax = cor(Close_dow - Close_dax, Rate_eur, use = &#39;complete.obs&#39;),
    cor_dow_nik = cor(Close_dow - Close_nik, Rate_yen, use = &#39;complete.obs&#39;)
  )</code></pre>
<pre><code># A tibble: 20 x 3
    year cor_dow_dax cor_dow_nik
   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
 1  1999      -0.639     -0.501 
 2  2000      -0.222     -0.479 
 3  2001      -0.393     -0.221 
 4  2002       0.162     -0.287 
 5  2003       0.772     -0.320 
 6  2004       0.253      0.427 
 7  2005       0.831      0.862 
 8  2006       0.776      0.0745
 9  2007      -0.136      0.824 
10  2008       0.825      0.788 
11  2009       0.837      0.740 
12  2010       0.714      0.932 
13  2011      -0.334      0.459 
14  2012      -0.248      0.727 
15  2013      -0.235      0.898 
16  2014      -0.856      0.781 
17  2015       0.601      0.819 
18  2016      -0.108      0.831 
19  2017       0.784      0.629 
20  2018       0.470      0.792 </code></pre>
</div>
</div>
<div id="datasets" class="section level2">
<h2>Datasets</h2>
<table>
<thead>
<tr class="header">
<th align="left">File</th>
<th align="left">Rows</th>
<th align="left">Columns</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://raw.githubusercontent.com/therbootcamp/BaselRBootcamp_2018July/master/_sessions/_data/baselrbootcamp_data/%5EDJI.csv">^DJI.csv</a></td>
<td align="left">8364</td>
<td align="left">7</td>
<td align="left">Dow Jones Industrial stock history</td>
</tr>
<tr class="even">
<td align="left"><a href="https://raw.githubusercontent.com/therbootcamp/BaselRBootcamp_2018July/master/_sessions/_data/baselrbootcamp_data/%5EGDAXI.csv">^GDAXI.csv</a></td>
<td align="left">7811</td>
<td align="left">7</td>
<td align="left">DAX stock history</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://raw.githubusercontent.com/therbootcamp/BaselRBootcamp_2018July/master/_sessions/_data/baselrbootcamp_data/%5EN225.csv">^N225.csv</a></td>
<td align="left">13722</td>
<td align="left">7</td>
<td align="left">Nikkei stock history</td>
</tr>
<tr class="even">
<td align="left"><a href="https://raw.githubusercontent.com/therbootcamp/BaselRBootcamp_2018July/master/_sessions/_data/baselrbootcamp_data/euro-dollar.txt">euro-dollar.txt</a></td>
<td align="left">6545</td>
<td align="left">3</td>
<td align="left">Euro to dollar exchange rates</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://raw.githubusercontent.com/therbootcamp/BaselRBootcamp_2018July/master/_sessions/_data/baselrbootcamp_data/yen-dollar.txt">yen-dollar.txt</a></td>
<td align="left">8754</td>
<td align="left">3</td>
<td align="left">Yen to dollar exchange rates</td>
</tr>
</tbody>
</table>
<div id="variable-descriptions" class="section level3">
<h3>Variable descriptions</h3>
<table>
<colgroup>
<col width="32%" />
<col width="67%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Date</td>
<td align="left">Current day</td>
</tr>
<tr class="even">
<td align="left">Open</td>
<td align="left">Day’s price when the stock exchange opened</td>
</tr>
<tr class="odd">
<td align="left">High</td>
<td align="left">Day’s highest price</td>
</tr>
<tr class="even">
<td align="left">Low</td>
<td align="left">Day’s lowest price</td>
</tr>
<tr class="odd">
<td align="left">Close</td>
<td align="left">Day’s closing price</td>
</tr>
<tr class="even">
<td align="left">Adj Close</td>
<td align="left">Adjusted closing price that has been amended to include any distributions and corporate actions that occurred at any time prior to the next day’s open</td>
</tr>
</tbody>
</table>
<p><u>Variables of data sets “euro-dollar.txt”, “yen-dollar.txt”</u></p>
<table>
<colgroup>
<col width="32%" />
<col width="67%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Date (currently unnamed)</td>
<td align="left">Current day</td>
</tr>
<tr class="even">
<td align="left">Rate (currently unnamed)</td>
<td align="left">Day’s exchange rate in terms of 1 US Dollar. E.g., a value of .75 means that the respective currency is worth a fraction of .75 of 1 US Dollar</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="functions" class="section level2">
<h2>Functions</h2>
<div id="packages" class="section level3">
<h3>Packages</h3>
<table>
<thead>
<tr class="header">
<th align="left">Package</th>
<th align="left">Installation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>tidyverse</code></td>
<td align="left"><code>install.packages(&quot;tidyverse&quot;)</code></td>
</tr>
<tr class="even">
<td align="left"><code>haven</code></td>
<td align="left"><code>install.packages(&quot;haven&quot;)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>lubridate</code></td>
<td align="left"><code>install.packages(&quot;lubridate&quot;)</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="resources" class="section level2">
<h2>Resources</h2>
<ul>
<li><p><a href="https://www.weforum.org/agenda/2015/07/whats-the-relationship-between-stock-returns-and-exchange-rates/">weforum.org “What’s the relationship between stock returns and exchange rates?”</a></p></li>
<li><p><a href="http://www.faz.net/aktuell/finanzen/aktien/eine-geschichte-des-dax-die-wichtigsten-ereignisse-12970011.html">faz.net</a></p></li>
</ul>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
