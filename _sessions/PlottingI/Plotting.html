<!DOCTYPE html>
<html>
  <head>
    <title>Plotting</title>
    <meta charset="utf-8">
    <meta name="author" content="R Bootcamp Bern   R Bootcamp Bern" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="baselrbootcamp.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Plotting
### R Bootcamp Bern<br/> <a href='https://therbootcamp.github.io'> R Bootcamp Bern </a> <br> <a href='https://dwulff.github.io/Intro2R_Unibe/'> <i class='fas fa-clock' style='font-size:.9em;'></i> </a>  <a href='https://therbootcamp.github.io'> <i class='fas fa-home' style='font-size:.9em;' ></i> </a>  <a href='mailto:therbootcamp@gmail.com'> <i class='fas fa-envelope' style='font-size: .9em;'></i> </a>  <a href='https://www.linkedin.com/company/basel-r-bootcamp/'> <i class='fab fa-linkedin' style='font-size: .9em;'></i> </a>
### February 2019

---


layout: true

&lt;div class="my-footer"&gt;
  &lt;span style="text-align:center"&gt;
    &lt;span&gt; 
      &lt;img src="https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/by-sa.png" height=14 style="vertical-align: middle"/&gt;
    &lt;/span&gt;
    &lt;a href="https://therbootcamp.github.io/"&gt;
      &lt;span style="padding-left:82px"&gt; 
        &lt;font color="#7E7E7E"&gt;
          www.therbootcamp.com
        &lt;/font&gt;
      &lt;/span&gt;
    &lt;/a&gt;
    &lt;a href="https://therbootcamp.github.io/"&gt;
      &lt;font color="#7E7E7E"&gt;
       R Bootcamp Bern | February 2019
      &lt;/font&gt;
    &lt;/a&gt;
    &lt;/span&gt;
  &lt;/div&gt; 

---










.pull-left4[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&gt; ### As good as R is for statistics, it's as good if not better for data visualisation
&gt; ### Nathaniel D. Phillips
]

.pull-right6[
&lt;br&gt;
&lt;img src="https://raw.githubusercontent.com/therbootcamp/therbootcamp.github.io/master/_sessions/_image/ggplotgallery.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---


.pull-left45[

# Base R Plotting

The &lt;high&gt;classic framework&lt;/high&gt; of plotting.

Contains separate &lt;high&gt;function for each 'type'&lt;/high&gt; of plot.

E.g. `barplot()` for a bar plot, `boxplot()` for a box plot, and `plot()` for a scatterplot. 

&lt;br&gt;


```r
# Histogram in base R
hist(x = baselers$age,
     xlab = "Age",
     ylab = "Frequency",
     main = "Baselers Age")
```

]

.pull-right5[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="Plotting_files/figure-html/unnamed-chunk-5-1.png" style="display: block; margin: auto;" /&gt;

]



---


.pull-left45[

# Base R Plotting

The &lt;high&gt;classic framework&lt;/high&gt; of plotting.

Contains separate &lt;high&gt;function for each 'type'&lt;/high&gt; of plot.

E.g. `barplot()` for a bar plot, `boxplot()` for a box plot, and `plot()` for a scatterplot. 

&lt;br&gt;



```r
# Boxplot in base R
boxplot(formula = height ~ sex,
        data = baselers,
        xlab = "Sex",
        ylab = "Height",
        main = "Box plot")
```

]

.pull-right45[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="Plotting_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;

]

---


.pull-left45[

# Base R Plotting

The &lt;high&gt;classic framework&lt;/high&gt; of plotting.

Contains separate &lt;high&gt;function for each 'type'&lt;/high&gt; of plot.

E.g. `barplot()` for a bar plot, `boxplot()` for a box plot, and `plot()` for a scatterplot. 

&lt;br&gt;



```r
# Scatterplot in base R
plot(x = baselers$height,
     y = baselers$income,
     xlab = "Height",
     ylab = "Income",
     main = "Scatterplot")
```

]

.pull-right45[
&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;img src="Plotting_files/figure-html/unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;

]


---

# Problems with Base R plotting

.pull-left35[

- Default plots look pretty &lt;high&gt;outdated&lt;/high&gt;.&lt;br&gt;

- Plots can quickly require a &lt;high&gt;LOT of code&lt;/high&gt;.&lt;br&gt;

- Can't store plots as &lt;high&gt;objects&lt;/high&gt; to reference and update later&lt;br&gt;

&lt;p align="center"&gt;&lt;high&gt;Solution: `ggplot2` &lt;/high&gt;&lt;/p&gt;

&lt;img src="https://www.r-graph-gallery.com/wp-content/uploads/2014/09/ggplot_hex.jpg" width="45%" style="display: block; margin: auto;" /&gt;



]

.pull-right55[

This plot would take &lt;high&gt;a lot of code in Base R&lt;/high&gt; but &lt;high&gt;just 10 lines of code&lt;/high&gt;, 5 of which controlling the labels, in `ggplot2`.

&lt;img src="Plotting_files/figure-html/unnamed-chunk-11-1.png" style="display: block; margin: auto;" /&gt;


]

---

# Grammar of Graphics in `ggplot2`

.pull-left45[

The &lt;high&gt;Grammar of graphics&lt;/high&gt; breaks down plots into several key pieces:

| Aesthetics| Description|
|:------|:----|
| Data| What dataframe contains the data?|
| axes| What does the x-axis, y-axis, color (etc) represent?|
| color| What does color represent? |
| size | What does size represent? |
| geometries| What kind of geometric object do you want to plot?|
| facets| Should there be groups of plots?|

]


.pull-right45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-12-1.png" style="display: block; margin: auto;" /&gt;

]


---

# Our goal: Creating this plot

.pull-left45[

&lt;high&gt;Data&lt;/high&gt;

- Use the `mpg` tibble

&lt;high&gt;Aesthetics&lt;/high&gt;

- Engine displacement (`disp`) on the x axis
- Highway miles per gallon (`hwy`) on the y-axis
- Color plotting elements by the `class` of car

&lt;high&gt;Geometric objects&lt;/high&gt;

- Show data as points
- Add a regression line

&lt;high&gt;Labels and themes&lt;/high&gt;

- Add plotting labels
- Use a black and white plotting theme

]


.pull-right45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-13-1.png" style="display: block; margin: auto;" /&gt;


]


---

# `ggplot()`


.pull-left45[

To &lt;high&gt;create a ggplot2 object&lt;/high&gt;, use the `ggplot()` function

`ggplot()` has two main arguments:

- `data` - A data frame (aka `tibble`)
- `mapping` - A call to `aes()`

]


.pull-right45[


```r
ggplot(data = mpg)
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-14-1.png" style="display: block; margin: auto;" /&gt;

]


---

# `ggplot()`


.pull-left45[

An &lt;high&gt;aesthetic mapping&lt;/high&gt; is a visual property of the objects in your plot. 

Use `aes()` to assign columns in your dataframe to properties in your plot.

Common aesthetics are...

| aesthetics| Description|
|:------|:----|
|     `x`, `y`|    Data mapped to coordinates|
|     `color`, `fill`|    Border and fill colors|
|     `alpha`| Transparency|
|    `size`|  Size|
|    `shape`|  Shape|

]

.pull-right45[


```r
ggplot(data = mpg,
       mapping = aes(x = displ, y = hwy))
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;" /&gt;

]

---

# Adding elements to plots with `+`

.pull-left45[

Once you have specified the `data` argument, and global aesthetics with `mapping = aes()`, &lt;high&gt;add additional elements to the plot with `+`&lt;/high&gt;.

The `+` operator works just like the pipe `%&gt;%` in `dplyr`. &lt;high&gt;It just means "and then..."&lt;/high&gt;


```r
ggplot(data = mpg,
       mapping = aes(x = displ,
                     y = hwy)) + #and then
       geom_point() 
```

]


.pull-right45[


&lt;img src="Plotting_files/figure-html/unnamed-chunk-17-1.png" style="display: block; margin: auto;" /&gt;


]


---

# Geometric objects (`geom`)


.pull-left4[

A &lt;high&gt;`geom`&lt;/high&gt; is a geometric object in a plot that represents data

To add a geom to a plot, just include ` + geom_X()` where X is the type of geom.

Common geoms are...

| geom| output|
|:------|:----|
|     `geom_point()`|    Points|
|     `geom_bar()`|    Bar|
|     `geom_boxplot()`| Boxplot
|     `geom_count()`| Points with size reflecting frequency|
|     `geom_smooth()`|  Smoothed line|

]

.pull-right45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-18-1.png" style="display: block; margin: auto;" /&gt;


]



---


.pull-left45[

&lt;br&gt;
## `geom_boxplot()`
&lt;br&gt;


```r
ggplot(data = mpg,
  mapping = aes(x = class,
                y = hwy)) + 
  geom_boxplot()
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-19-1.png" style="display: block; margin: auto;" /&gt;


]

.pull-right45[

&lt;br&gt;
## `geom_violin()`
&lt;br&gt;


```r
ggplot(data = mpg,
  mapping = aes(x = class,
                y = hwy)) + 
  geom_violin()
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-20-1.png" width="100%" style="display: block; margin: auto;" /&gt;


]



---

.pull-left45[

&lt;br&gt;
## `geom_bar()`
&lt;br&gt;


```r
ggplot(data = mpg,
  mapping = aes(x = class)) + 
  geom_bar()
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-21-1.png" width="100%" style="display: block; margin: auto;" /&gt;


]


.pull-right45[

&lt;br&gt;
## `geom_count()`
&lt;br&gt;


```r
ggplot(data = mpg,
  mapping = aes(x = displ,
                y = hwy)) + 
  geom_count()
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]



---

# `aes()`

.pull-left45[

&lt;high&gt;`color`&lt;/high&gt; geoms according to a variable. 


```r
ggplot(data = mpg,
       mapping = aes(x = displ,
                     y = hwy,
                     color = class)) + 
  geom_point()
```


&lt;p align="center"&gt; `mpg`&lt;/p&gt;

| displ| hwy|class   | year|
|-----:|---:|:-------|----:|
|   2.8|  26|compact | 1999|
|   4.7|  15|suv     | 1999|
|   3.1|  26|midsize | 1999|
|   1.8|  29|midsize | 1999|
|   3.4|  19|pickup  | 1999|


]

.pull-right45[

&lt;br&gt;
&lt;img src="Plotting_files/figure-html/unnamed-chunk-25-1.png" style="display: block; margin: auto;" /&gt;


]

---


# What's next?

.pull-left45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-26-1.png" style="display: block; margin: auto;" /&gt;


]


.pull-right45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-27-1.png" style="display: block; margin: auto;" /&gt;

]


---

# `geom_smooth()`

.pull-left45[

`geom_smooth()` adds a &lt;high&gt;smoothed line&lt;/high&gt;.

Change how the line is created with `method` (e.g., `method = lm`).

Color the line with `col`.

&lt;br&gt;

```r
ggplot(data = mpg, 
       mapping = aes(x = displ, y = hwy,
                     col = class)) +
  geom_point() + 
  geom_smooth(col = "blue")
```

]

.pull-right45[


&lt;img src="Plotting_files/figure-html/unnamed-chunk-29-1.png" style="display: block; margin: auto;" /&gt;

]

---

# `geom_smooth()`

.pull-left45[

`geom_smooth()` adds a &lt;high&gt;smoothed line&lt;/high&gt;.

Change how the line is created with `method` (e.g., `method = lm`).

Color the line with `col`

&lt;br&gt;

```r
ggplot(data = mpg, 
       mapping = aes(x = displ, y = hwy,
                     col = class)) +
  geom_point() + 
  geom_smooth(col = "blue",
              method = "lm")
```

]

.pull-right45[


&lt;img src="Plotting_files/figure-html/unnamed-chunk-31-1.png" style="display: block; margin: auto;" /&gt;

]

---

# Overriding aesthetics

.pull-left45[

If you add additional plotting aesthetics, they will &lt;high&gt;override&lt;/high&gt; the general plotting aesthetics.

This is what happens, when you don't override...

&lt;br&gt;

```r
ggplot(data = mpg, 
       mapping = aes(x = displ, y = hwy,
                     col = class)) +
  geom_point() + 
  geom_smooth() # no overriding
```

]

.pull-right45[


&lt;img src="Plotting_files/figure-html/unnamed-chunk-33-1.png" style="display: block; margin: auto;" /&gt;

]


---

# What's next?

.pull-left45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-34-1.png" style="display: block; margin: auto;" /&gt;

]


.pull-right45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-35-1.png" style="display: block; margin: auto;" /&gt;

]


---

# `labs()`

.pull-left45[

You can add &lt;high&gt;labels&lt;/high&gt; to a plot with the `labs()` function

`labs()` arguments are ...

- `title` - Main title
- `subtitle` - Subtitle
- `caption` - Caption below



```r
ggplot(...) +
  labs(x = "Engine Displ...",
       y = "Highway miles...",
       title = "MPG data",
       subtitle = "Cars with ...",
       caption = "Source...")
```

]


.pull-right45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-37-1.png" style="display: block; margin: auto;" /&gt;

]


---

# What's next?

.pull-left45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-38-1.png" style="display: block; margin: auto;" /&gt;

]


.pull-right45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-39-1.png" style="display: block; margin: auto;" /&gt;

]



---

# Themes with `theme_XX()`

.pull-left45[

A plotting &lt;high&gt;theme&lt;/high&gt; controls many aspects of its &lt;high&gt;overall look&lt;/high&gt;, from the background, to the grid lines, to the label font to the spacing between plot labels and the plotting space.

Themes built into `ggplot2`

`theme_bw()`&lt;br&gt;
`theme_minimal()`&lt;br&gt;
`theme_classic()`&lt;br&gt;
`theme_light()`&lt;br&gt;
`theme_void()`

Themes from the `ggthemes` package

`theme_excel()`&lt;br&gt;
`theme_economist()`&lt;br&gt;
etc.

]

.pull-right45[


```r
ggplot(...) + 
  theme_gray() # The Default theme
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-41-1.png" style="display: block; margin: auto;" /&gt;

]

---

# Themes with `theme_XX()`

.pull-left45[

A plotting &lt;high&gt;theme&lt;/high&gt; controls many aspects of its &lt;high&gt;overall look&lt;/high&gt;, from the background, to the grid lines, to the label font to the spacing between plot labels and the plotting space.

Themes built into `ggplot2`

`theme_bw()`&lt;br&gt;
`theme_minimal()`&lt;br&gt;
`theme_classic()`&lt;br&gt;
`theme_light()`&lt;br&gt;
`theme_void()`

Themes from the `ggthemes` package

`theme_excel()`&lt;br&gt;
`theme_economist()`&lt;br&gt;
etc.



]

.pull-right45[


```r
ggplot(...) + 
  theme_light()
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-43-1.png" style="display: block; margin: auto;" /&gt;

]

---

# Themes with `theme_XX()`

.pull-left45[

A plotting &lt;high&gt;theme&lt;/high&gt; controls many aspects of its &lt;high&gt;overall look&lt;/high&gt;, from the background, to the grid lines, to the label font to the spacing between plot labels and the plotting space.

Themes built into `ggplot2`

`theme_bw()`&lt;br&gt;
`theme_minimal()`&lt;br&gt;
`theme_classic()`&lt;br&gt;
`theme_light()`&lt;br&gt;
`theme_void()`

Themes from the `ggthemes` package

`theme_excel()`&lt;br&gt;
`theme_economist()`&lt;br&gt;
etc.



]

.pull-right45[


```r
ggplot(...) + 
  theme_void()
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-45-1.png" style="display: block; margin: auto;" /&gt;

]

---

# Themes with `theme_XX()`

.pull-left45[

A plotting &lt;high&gt;theme&lt;/high&gt; controls many aspects of its &lt;high&gt;overall look&lt;/high&gt;, from the background, to the grid lines, to the label font to the spacing between plot labels and the plotting space.

Themes built into `ggplot2`

`theme_bw()`&lt;br&gt;
`theme_minimal()`&lt;br&gt;
`theme_classic()`&lt;br&gt;
`theme_light()`&lt;br&gt;
`theme_void()`

Themes from the `ggthemes` package

`theme_excel()`&lt;br&gt;
`theme_economist()`&lt;br&gt;
etc.



]

.pull-right45[



```r
ggplot(...) + 
  theme_excel()
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-47-1.png" style="display: block; margin: auto;" /&gt;

]


---

# Themes with `theme_XX()`

.pull-left45[

A plotting &lt;high&gt;theme&lt;/high&gt; controls many aspects of its &lt;high&gt;overall look&lt;/high&gt;, from the background, to the grid lines, to the label font to the spacing between plot labels and the plotting space.

Themes built into `ggplot2`:

`theme_bw()`&lt;br&gt;
`theme_minimal()`&lt;br&gt;
`theme_classic()`&lt;br&gt;
`theme_light()`&lt;br&gt;
`theme_void()`

Themes from the `ggthemes` package

`theme_excel()`&lt;br&gt;
`theme_economist()`&lt;br&gt;
etc.


]

.pull-right45[


```r
ggplot(...) + 
  theme_economist()
```

&lt;img src="Plotting_files/figure-html/unnamed-chunk-49-1.png" style="display: block; margin: auto;" /&gt;

]

---

# Final result!


.pull-left45[


```r
ggplot(data = mpg, 
       mapping = aes(x = displ, 
                     y = hwy, 
                     col = class)) +
  geom_point() + 
  geom_smooth(col = "blue", 
              method = "lm")+
  labs(x = "Engine Displ. in Liters",
       y = "Highway miles per gallon",
       title = "MPG data",
       subtitle = "Cars with higher...",
       caption = "Source: mpg data...") + 
  theme_bw()
```

]


.pull-right45[

&lt;img src="Plotting_files/figure-html/unnamed-chunk-51-1.png" style="display: block; margin: auto;" /&gt;

]


---


# Practical

&lt;font size=6&gt;&lt;b&gt;&lt;a href="https://therbootcamp.github.io/Intro2DataScience_2018Oct/_sessions/Plotting/Plotting_practical.html"&gt;Link to practical&lt;/a&gt;
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
